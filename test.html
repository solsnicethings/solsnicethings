<!DOCTYPE html>
<html lang=en>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">

<title>Testtest (we try to look ahead)</title>

<link href="css/standard.css" rel="stylesheet" type="text/css" />
<!--
<script>
const component_registry = {};
</script>
-->
</head>
<body>

<header>
<a class='gohome helplink' href="/">Return to frontpage</a>
<h1>Testtest (we try to look ahead)</h1>
</header>

<h2>Loadmsg tests</h2>
<div><div class=loadmsg></div></div><hr>
<div><div first="" last="" class=loadmsg></div></div><hr>
<div><div first="Leading message" last="Trailing message" class=loadmsg></div></div><hr>
<div><div class=loadmsg>This message is in the body</div></div><hr>
<div><div first="headloader" class=loadmsg>This is the body too</div></div><hr>
<div><div last=footloader class=loadmsg>And body</div></div><hr>
<div><div first="Loading all properties" last="All properties loaded" class=loadmsg>And in this one we are showing everything.</div></div><hr>


Unseen loadmessage:
<div class=loadmsg>
</div>

Seen loadmessage:
<div><div class=loadmsg></div></div>

	<diagnostic class=diagnostic>diagnostic <action>X</action><action>X</action><action>g</action><action>s</action></diagnostic>
	<errormsg class=diagnostic>diagnostic <action>X</action></errormsg>
	
	<table class=workspace><tr>
	<td class=active id=main>
	<item activator=test>
	<btn>test</btn>
	<btn class=used>test</btn>
	<btn class=disabled>test</btn>
	<diagnostic class=diagnostic>diagnostic <action>X</action></diagnostic>
	<errormsg class=diagnostic>diagnostic <action>X</action></errormsg>
	<u>Example text</u>


	</item></td>
	<td class=menu>
	<btn activator=test>test</btn>
	<btn class=used>test</btn>
	<btn class=disabled>test</btn>
	<item>
	<btn activator=test>test</btn>
	<btn class=used>test</btn>
	<btn class=disabled>test</btn>
	</item>
	<item>
	<btn>test</btn>
	<div> fine </div>
	</item>
	<item>
	<div> fine </div>
	<btn>test</btn>
	<div> fine </div>
	</item>	
	</td>
	</tr><table>
	
	
<script>

		document.addEventListener('change', e => {
			//label:not([for]) > input[type="radio"]:first-of-type:last-of-type,
			//label:not([for]) > input[type="checkbox"]:first-of-type:last-of-type	
			e = e.target;
			if (e.tagName == 'INPUT' && e.parentNode.tagName == 'LABEL' &&
				!e.parentNode.hasAttribute('for') && 
				e.parentNode.querySelector(':scope > input:first-of-type:last-of-type'))
				switch (e.getAttribute('type'))
				{
					case 'radio': case 'checkbox':
						if (e.checked) e.parentNode.setAttribute('input-checked', '');
						else e.parentNode.removeAttribute('input-checked');
				}
			
		});
		
		
	let dom = document.getElementById('main');
	let config = document.createElement('iframe');
	
	
	/*component_registry[config.contentWindow] =*/ const heightlistener = height => {
		config.style.height = height;
		config.parentNode.style.height = height;
	};
	
	window.addEventListener(   "message",   (event) => {
		let t = heightlistener; //component_registry[event.source];
		if (t) t(event.data);
  });
		
	
	config.setAttribute('title', 'Configuration');
	// test version doesn't use forward slash and calls for test
	config.setAttribute('src', 'configtest.html?embedded&scope=' + encodeURIComponent(location.pathname));
	
	let box = document.createElement('div');
	box.className = 'fixwidth';
	box.appendChild(config);
	dom.appendChild(box);
	/*
function RunWhenLoaded(e, n = document) {
	if (n instanceof HTMLDocument) {
		if (n.readyState == "complete") { e(); return; }
		n = n.defaultViewport;
	} else if (n instanceof HTMLIFrameElement) {
		if (n.contentDocument) RunWhenLoaded(e, n.contentDocument);
		else n.contentWindow.addEventListener("load", e);
		return;
	}
	n.addEventListener("load", e);
}


	
	RunWhenLoaded(e => {
		//CompleteComposeScript.chainThen
		box.style.minHeight = config.contentDocument.documentElement.getComputedStyle().height;
		config.style.minHeight = box.style.minHeight;
	}, config); */
	
</script>


<footer>
<action>purge diagnostic messages</action>
<u class=righthalflabel style="translate: 0 1.2em">You can find me at:</u>
<buttons>
<a href=https://www.patreon.com/stjernehest>Patreon</a>
<a href=https://www.youtube.com/channel/UCka6nkfhl3sPLLyi4HawTQQ>YouTube</a>
<a href=https://megaturtle.bandcamp.com/album/the-dozy-girl-overnight-travel-companion>Bandcamp</a>
<a href=https://open.spotify.com/track/3jq6NBp0Psj8gqYudXIcQv?si=d1422932b206409c>My childhood band put one song on Spotify</a>
</buttons>
<i style="float: right">(Links do NOT automatically open new tabs)</i>
<hr>
|<cap style="position: absolute; z-index: 1;" class="bc fc">&copy; Copyright 2024, Aron Riktor (Sol) |</cap>
<b class='muddled righthalflabel'>Fair warning:<br><u>changes, errors and capacity restrictions are likely (expenses were spared)</u></b>
</footer>

</body>
</html>